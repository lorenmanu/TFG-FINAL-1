{% extends 'base.html.twig.php' %}
{% block side %}

  <div id="pagina_contenido">
    <div id="contenido" class="sec_interior">
      <div class="content_doku">

        {% form_theme formOferta 'bootstrap_3_layout.html.twig' %}

           {{ form_start(formOferta, {'action': path('addOferta'), 'method': 'POST'}) }}

           {{ form_label(formOferta.nombre) }}
           {{ form_widget(formOferta.nombre, { 'attr': {'class': 'nombre'} }) }}

           {{ form_label(formOferta.descripcion) }}
           {{ form_widget(formOferta.descripcion, { 'attr': {'class': 'descripcion'} }) }}

           {{ form_label(formOferta.condiciones) }}
           {{ form_widget(formOferta.condiciones, { 'attr': {'class': 'condiciones'} }) }}

           {{ form_label(formOferta.fechaInicio) }}
           {{ form_widget(formOferta.fechaInicio, { 'attr': {'class': 'datepicker'} }) }}

           {{ form_label(formOferta.fechaFin) }}
           {{ form_widget(formOferta.fechaFin, { 'attr': {'class': 'datepicker'} }) }}

           {{ form_label(formOferta.contacto) }}
           {{ form_widget(formOferta.contacto, { 'attr': {'class': 'contacto'} }) }}


           {{ form_label(formOferta.brochure) }}
           {{ form_widget(formOferta.brochure, { 'attr': {'class': 'file'} }) }}
           {% block area %}

           {% endblock %}
           {{ form_widget(formOferta.area) }}
           {{ form_widget(formOferta.rama) }}
           {{ form_widget(formOferta.disciplina) }}
           {{ form_end(formOferta) }}

  
          <script>
              $("#form_area").change(function() {
                  var data = {
                    area_id: $(this).val()
                  };
                  alert(data[0])
                  $.ajax({
                      type: 'post',
                      url: '{{ path("select_ramas") }}',
                      data: data,
                      success: function(data,url) {
                          var $rama_selector = $('#form_rama');
                          alert(data);

                          $rama_selector.html('<option value="' + data[0].toString() + '">' + data[1].toString() + '</option>');
                          for (var i = 2, total = data.length; i < total;) {
                              $rama_selector.append('<option value="' + data[i] + '">' + data[i+1] + '</option>');
                              i=i+2;
                          }

                      }
                  });
              });
          </script>
          <script>
          $("#form_rama").change(function() {
              var data = {
                rama_id: $(this).val()
              };
              alert(data[0])
              $.ajax({
                  type: 'post',
                  url: '{{ path("select_disciplinas") }}',
                  data: data,
                  success: function(data,url) {
                      var $rama_selector = $('#form_disciplina');
                      alert(data);

                      $rama_selector.html('<option value="' + data[0].toString() + '">' + data[1].toString() + '</option>');
                      for (var i = 2, total = data.length; i < total;) {
                          $rama_selector.append('<option value="' + data[i] + '">' + data[i+1] + '</option>');
                          i=i+2;
                      }
                  }
              });
          });
      </script>

      </div>
    </div>
  </div>
  {% endblock %}
