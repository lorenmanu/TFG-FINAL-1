{% extends 'base.html.twig.php' %}
{% block side %}


        {% form_theme formOferta 'bootstrap_3_layout.html.twig' %}
            {{ form_errors(formOferta.nombre) }}

           {{ form_start(formOferta, {'action': path('editOferta'), 'method': 'POST', 'multipart': 'true'}) }}

           {{ form_label(formOferta.nombre) }}
           {{ form_widget(formOferta.nombre, { 'attr': {'class': 'nombre'} }) }}

           {{ form_errors(formOferta.descripcion) }}
           {{ form_label(formOferta.descripcion) }}
           {{ form_widget(formOferta.descripcion, { 'attr': {'class': 'descripcion'} }) }}

           {{ form_label(formOferta.condiciones) }}
           {{ form_widget(formOferta.condiciones, { 'attr': {'class': 'condiciones'} }) }}

           {{ form_label(formOferta.fechaInicio) }}
           {{ form_widget(formOferta.fechaInicio, { 'attr': {'class': 'datepicker'} }) }}

           {{ form_label(formOferta.fechaFin) }}
           {{ form_widget(formOferta.fechaFin, { 'attr': {'class': 'datepicker'} }) }}

           {{ form_errors(formOferta.contacto) }}
           {{ form_label(formOferta.contacto) }}
           {{ form_widget(formOferta.contacto, { 'attr': {'class': 'contacto'} }) }}


           {{ form_label(formOferta.brochure) }}
           {{ form_widget(formOferta.brochure, { 'attr': {'class': 'file'} }) }}
           {% block area %}

           {% endblock %}
           {{ form_widget(formOferta.area) }}
           {{ form_widget(formOferta.rama) }}
           {{ form_widget(formOferta.disciplina) }}
           {{ form_end(formOferta) }}

  
          <script>
              $("#form_area").change(function() {
                  var data = {
                    area_id: $(this).val()
                  };
                  alert(data[0])
                  $.ajax({
                      type: 'post',
                      url: '{{ path("select_ramas") }}',
                      data: data,
                      success: function(data,url) {
                          var $rama_selector = $('#form_rama');
                          alert(data);

                          $rama_selector.html('<option value="' + data[0].toString() + '">' + data[1].toString() + '</option>');
                          for (var i = 2, total = data.length; i < total;) {
                              $rama_selector.append('<option value="' + data[i] + '">' + data[i+1] + '</option>');
                              i=i+2;
                          }

                      }
                  });
              });
          </script>
          <script>
          $("#form_rama").change(function() {
              var data = {
                rama_id: $(this).val()
              };
              alert(data[0])
              $.ajax({
                  type: 'post',
                  url: '{{ path("select_disciplinas") }}',
                  data: data,
                  success: function(data,url) {
                      var $rama_selector = $('#form_disciplina');
                      alert(data);

                      $rama_selector.html('<option value="' + data[0].toString() + '">' + data[1].toString() + '</option>');
                      for (var i = 2, total = data.length; i < total;) {
                          $rama_selector.append('<option value="' + data[i] + '">' + data[i+1] + '</option>');
                          i=i+2;
                      }
                  }
              });
          });
      </script>

  {% endblock %}
